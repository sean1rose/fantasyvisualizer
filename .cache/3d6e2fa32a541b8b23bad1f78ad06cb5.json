{"dependencies":[{"name":"lodash/uniq","loc":{"line":5,"column":21}},{"name":"lodash/cloneDeep","loc":{"line":9,"column":26}},{"name":"react","loc":{"line":23,"column":21}},{"name":"d3-sankey","loc":{"line":27,"column":24}},{"name":"../../../props","loc":{"line":29,"column":21}},{"name":"../SvgWrapper","loc":{"line":31,"column":26}},{"name":"./SankeyNodes","loc":{"line":35,"column":27}},{"name":"./SankeyLinks","loc":{"line":39,"column":27}},{"name":"./SankeyLabels","loc":{"line":43,"column":28}},{"name":"../Container","loc":{"line":47,"column":25}},{"name":"./props","loc":{"line":51,"column":22}},{"name":"./enhance","loc":{"line":53,"column":23}}],"generated":{"js":"'use strict';\n\nexports.__esModule = true;\n\nvar _uniq2 = require('lodash/uniq');\n\nvar _uniq3 = _interopRequireDefault(_uniq2);\n\nvar _cloneDeep2 = require('lodash/cloneDeep');\n\nvar _cloneDeep3 = _interopRequireDefault(_cloneDeep2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*\n                                                                                                                                                                                                                                                                   * This file is part of the nivo project.\n                                                                                                                                                                                                                                                                   *\n                                                                                                                                                                                                                                                                   * Copyright 2016-present, RaphaÃ«l Benitte.\n                                                                                                                                                                                                                                                                   *\n                                                                                                                                                                                                                                                                   * For the full copyright and license information, please view the LICENSE\n                                                                                                                                                                                                                                                                   * file that was distributed with this source code.\n                                                                                                                                                                                                                                                                   */\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _d3Sankey = require('d3-sankey');\n\nvar _props = require('../../../props');\n\nvar _SvgWrapper = require('../SvgWrapper');\n\nvar _SvgWrapper2 = _interopRequireDefault(_SvgWrapper);\n\nvar _SankeyNodes = require('./SankeyNodes');\n\nvar _SankeyNodes2 = _interopRequireDefault(_SankeyNodes);\n\nvar _SankeyLinks = require('./SankeyLinks');\n\nvar _SankeyLinks2 = _interopRequireDefault(_SankeyLinks);\n\nvar _SankeyLabels = require('./SankeyLabels');\n\nvar _SankeyLabels2 = _interopRequireDefault(_SankeyLabels);\n\nvar _Container = require('../Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _props2 = require('./props');\n\nvar _enhance = require('./enhance');\n\nvar _enhance2 = _interopRequireDefault(_enhance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getId = function getId(d) {\n    return d.id;\n};\n\nvar Sankey = function Sankey(_ref) {\n    var _data = _ref.data,\n        align = _ref.align,\n        margin = _ref.margin,\n        width = _ref.width,\n        height = _ref.height,\n        outerWidth = _ref.outerWidth,\n        outerHeight = _ref.outerHeight,\n        nodeOpacity = _ref.nodeOpacity,\n        nodeHoverOpacity = _ref.nodeHoverOpacity,\n        nodeHoverOthersOpacity = _ref.nodeHoverOthersOpacity,\n        nodeWidth = _ref.nodeWidth,\n        nodePaddingX = _ref.nodePaddingX,\n        nodePaddingY = _ref.nodePaddingY,\n        nodeBorderWidth = _ref.nodeBorderWidth,\n        getNodeBorderColor = _ref.getNodeBorderColor,\n        setCurrentNode = _ref.setCurrentNode,\n        currentNode = _ref.currentNode,\n        linkOpacity = _ref.linkOpacity,\n        linkHoverOpacity = _ref.linkHoverOpacity,\n        linkHoverOthersOpacity = _ref.linkHoverOthersOpacity,\n        linkContract = _ref.linkContract,\n        getLinkColor = _ref.getLinkColor,\n        setCurrentLink = _ref.setCurrentLink,\n        currentLink = _ref.currentLink,\n        enableLabels = _ref.enableLabels,\n        getLabel = _ref.getLabel,\n        labelPosition = _ref.labelPosition,\n        labelPadding = _ref.labelPadding,\n        labelOrientation = _ref.labelOrientation,\n        getLabelTextColor = _ref.getLabelTextColor,\n        theme = _ref.theme,\n        getColor = _ref.getColor,\n        nodeTooltip = _ref.nodeTooltip,\n        linkTooltip = _ref.linkTooltip,\n        animate = _ref.animate,\n        motionDamping = _ref.motionDamping,\n        motionStiffness = _ref.motionStiffness,\n        isInteractive = _ref.isInteractive,\n        onClick = _ref.onClick,\n        tooltipFormat = _ref.tooltipFormat;\n\n    var sankey = (0, _d3Sankey.sankey)().nodeAlign((0, _props.sankeyAlignmentFromProp)(align)).nodeWidth(nodeWidth).nodePadding(nodePaddingY).size([width, height]).nodeId(getId);\n\n    // deep clone is required as the sankey diagram mutates data\n    var data = (0, _cloneDeep3.default)(_data);\n    sankey(data);\n\n    data.nodes.forEach(function (node) {\n        node.color = getColor(node);\n        node.label = getLabel(node);\n        node.x = node.x0 + nodePaddingX;\n        node.y = node.y0;\n        node.width = Math.max(node.x1 - node.x0 - nodePaddingX * 2, 0);\n        node.height = Math.max(node.y1 - node.y0, 0);\n    });\n\n    data.links.forEach(function (link) {\n        link.color = getLinkColor(link);\n    });\n\n    var motionProps = {\n        animate: animate,\n        motionDamping: motionDamping,\n        motionStiffness: motionStiffness\n    };\n\n    var isCurrentNode = function isCurrentNode() {\n        return false;\n    };\n    var isCurrentLink = function isCurrentLink() {\n        return false;\n    };\n\n    if (currentLink) {\n        isCurrentNode = function isCurrentNode(_ref2) {\n            var id = _ref2.id;\n            return id === currentLink.source.id || id === currentLink.target.id;\n        };\n        isCurrentLink = function isCurrentLink(_ref3) {\n            var source = _ref3.source,\n                target = _ref3.target;\n            return source.id === currentLink.source.id && target.id === currentLink.target.id;\n        };\n    }\n\n    if (currentNode) {\n        var currentNodeIds = [currentNode.id];\n        data.links.filter(function (_ref4) {\n            var source = _ref4.source,\n                target = _ref4.target;\n            return source.id === currentNode.id || target.id === currentNode.id;\n        }).forEach(function (_ref5) {\n            var source = _ref5.source,\n                target = _ref5.target;\n\n            currentNodeIds.push(source.id);\n            currentNodeIds.push(target.id);\n        });\n\n        currentNodeIds = (0, _uniq3.default)(currentNodeIds);\n        isCurrentNode = function isCurrentNode(_ref6) {\n            var id = _ref6.id;\n            return currentNodeIds.includes(id);\n        };\n        isCurrentLink = function isCurrentLink(_ref7) {\n            var source = _ref7.source,\n                target = _ref7.target;\n            return source.id === currentNode.id || target.id === currentNode.id;\n        };\n    }\n\n    return _react2.default.createElement(\n        _Container2.default,\n        { isInteractive: isInteractive, theme: theme },\n        function (_ref8) {\n            var showTooltip = _ref8.showTooltip,\n                hideTooltip = _ref8.hideTooltip;\n            return _react2.default.createElement(\n                _SvgWrapper2.default,\n                { width: outerWidth, height: outerHeight, margin: margin },\n                _react2.default.createElement(_SankeyLinks2.default, _extends({\n                    links: data.links,\n                    linkContract: linkContract,\n                    linkOpacity: linkOpacity,\n                    linkHoverOpacity: linkHoverOpacity,\n                    linkHoverOthersOpacity: linkHoverOthersOpacity,\n                    showTooltip: showTooltip,\n                    hideTooltip: hideTooltip,\n                    setCurrentLink: setCurrentLink,\n                    currentNode: currentNode,\n                    currentLink: currentLink,\n                    isCurrentLink: isCurrentLink,\n                    onClick: onClick,\n                    tooltip: linkTooltip,\n                    theme: theme,\n                    tooltipFormat: tooltipFormat\n                }, motionProps)),\n                _react2.default.createElement(_SankeyNodes2.default, _extends({\n                    nodes: data.nodes,\n                    nodePaddingX: nodePaddingX,\n                    nodeOpacity: nodeOpacity,\n                    nodeHoverOpacity: nodeHoverOpacity,\n                    nodeHoverOthersOpacity: nodeHoverOthersOpacity,\n                    nodeBorderWidth: nodeBorderWidth,\n                    getNodeBorderColor: getNodeBorderColor,\n                    showTooltip: showTooltip,\n                    hideTooltip: hideTooltip,\n                    setCurrentNode: setCurrentNode,\n                    currentNode: currentNode,\n                    currentLink: currentLink,\n                    isCurrentNode: isCurrentNode,\n                    onClick: onClick,\n                    tooltip: nodeTooltip,\n                    theme: theme,\n                    tooltipFormat: tooltipFormat\n                }, motionProps)),\n                enableLabels && _react2.default.createElement(_SankeyLabels2.default, _extends({\n                    nodes: data.nodes,\n                    width: width,\n                    labelPosition: labelPosition,\n                    labelPadding: labelPadding,\n                    labelOrientation: labelOrientation,\n                    getLabelTextColor: getLabelTextColor,\n                    theme: theme\n                }, motionProps))\n            );\n        }\n    );\n};\n\nSankey.propTypes = _props2.SankeyPropTypes;\n\nexports.default = (0, _enhance2.default)(Sankey);"},"hash":"73bb3cdf25cf75870e4f51152093a97c"}